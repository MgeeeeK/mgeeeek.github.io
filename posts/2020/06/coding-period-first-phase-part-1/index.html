<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="map[name:Mragank Shekhar]">
<meta name="description" content="Community Bonding period ended on 31st May, I covered my experience with PySAL community during the CB period in my last blog. The coding period has started at the beginning of this month and we’ve already reached midway of the first phase. Through this blog, I’ll share what all I’ve been working on during these couple of weeks.
Overview of 2 Spatial Weight Objects During the community bonding period my focus was to grow my understanding of libpysal&#39;s structure, codebase, and API design paradigms." />
<meta name="keywords" content="blog,developer,personal, gsoc, coding period" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="#252627" />
<link rel="canonical" href="https://mgeeeek.github.io/posts/2020/06/coding-period-first-phase-part-1/" />


    <title>
        
            Coding period: first phase part 1 :: Mragank Shekhar 
        
    </title>



<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="https://mgeeeek.github.io/main.min.1a82fce3e67e89eaadce1b92ba2f322a11be767a9f2d81a9b53a3a82dd213a5f.css">




    <link rel="apple-touch-icon" sizes="180x180" href="https://mgeeeek.github.io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://mgeeeek.github.io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://mgeeeek.github.io/favicon-16x16.png">
    <link rel="manifest" href="https://mgeeeek.github.io/site.webmanifest">
    <link rel="mask-icon" href="https://mgeeeek.github.io/safari-pinned-tab.svg" color="#252627">
    <link rel="shortcut icon" href="https://mgeeeek.github.io/favicon.ico">
    <meta name="msapplication-TileColor" content="#252627">
    <meta name="theme-color" content="#252627">

<meta itemprop="name" content="Coding period: first phase part 1">
<meta itemprop="description" content="Community Bonding period ended on 31st May, I covered my experience with PySAL community during the CB period in my last blog. The coding period has started at the beginning of this month and we’ve already reached midway of the first phase. Through this blog, I’ll share what all I’ve been working on during these couple of weeks.
Overview of 2 Spatial Weight Objects During the community bonding period my focus was to grow my understanding of libpysal&#39;s structure, codebase, and API design paradigms.">
<meta itemprop="datePublished" content="2020-06-14T00:00:00+00:00" />
<meta itemprop="dateModified" content="2020-06-14T00:00:00+00:00" />
<meta itemprop="wordCount" content="886">
<meta itemprop="image" content="https://mgeeeek.github.io"/>



<meta itemprop="keywords" content="gsoc,coding period," />
<meta property="og:title" content="Coding period: first phase part 1" />
<meta property="og:description" content="Community Bonding period ended on 31st May, I covered my experience with PySAL community during the CB period in my last blog. The coding period has started at the beginning of this month and we’ve already reached midway of the first phase. Through this blog, I’ll share what all I’ve been working on during these couple of weeks.
Overview of 2 Spatial Weight Objects During the community bonding period my focus was to grow my understanding of libpysal&#39;s structure, codebase, and API design paradigms." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mgeeeek.github.io/posts/2020/06/coding-period-first-phase-part-1/" />
<meta property="og:image" content="https://mgeeeek.github.io"/>
<meta property="article:published_time" content="2020-06-14T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-06-14T00:00:00+00:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://mgeeeek.github.io"/>

<meta name="twitter:title" content="Coding period: first phase part 1"/>
<meta name="twitter:description" content="Community Bonding period ended on 31st May, I covered my experience with PySAL community during the CB period in my last blog. The coding period has started at the beginning of this month and we’ve already reached midway of the first phase. Through this blog, I’ll share what all I’ve been working on during these couple of weeks.
Overview of 2 Spatial Weight Objects During the community bonding period my focus was to grow my understanding of libpysal&#39;s structure, codebase, and API design paradigms."/>



    <meta property="article:section" content="gsoc" />



    <meta property="article:published_time" content="2020-06-14 00:00:00 &#43;0000 UTC" />







    </head>

    <body class="">
        <main class="container">
            <header class="header">
    <span class="header__inner">
        <a href="https://mgeeeek.github.io/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">Home</span>
            <span class="logo__cursor" style=
                  "
                   background-color:#f25056;
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://mgeeeek.github.io/about/">About</a></li><li><a href="https://mgeeeek.github.io/posts/">Blogs</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            

            <span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>5 minutes

            

            </p>
        </div>

        <article>
            <h1 class="post-title">
                <a href="https://mgeeeek.github.io/posts/2020/06/coding-period-first-phase-part-1/">Coding period: first phase part 1</a>
            </h1>

            

            <div class="post-content">
                <p><em>Community Bonding period ended on 31st May, I covered my experience with PySAL community during the CB period in my last blog. The coding period has started at the beginning of this month and we’ve already reached midway of the first phase. Through this blog, I’ll share what all I’ve been working on during these couple of weeks.</em></p>
<h2 id="overview-of-2-spatial-weight-objects">Overview of 2 Spatial Weight Objects</h2>
<p>During the community bonding period my focus was to grow my understanding of <code>libpysal</code>'s structure, codebase, and API design paradigms. Along with this, I was looking deeply at the 2 types of spatial class objects used in PySAL namely <code>W</code> &amp; <code>WSP</code> objects which are used to construct spatial weight matrices, specifically I was understanding the logic and structure of each object and ways in which both of them are created. Lemme provides a bit overview of each object (this is a fairly basic explanation, please refer to this <a href="https://youtu.be/fc1f4MNLzdQ?t=5424">video</a> or the main <a href="https://pysal.org/libpysal/">documentation</a> of <code>libpysal</code>).</p>
<p><strong>Spatial Weights Matrix</strong>: In general, it expresses the relationship of a spatial point with its neighboring points. It can be viewed as an adjacency matrix of a weighted graph where each node is connected to other node and these connections follow a specific spatial-contiguity like rook or queen (there are other contiguities as well but these 2 are intuitive to understand).</p>
<p><strong>W object</strong>: It&rsquo;s used to construct spatial weight and represent it in the form of 2 dictionaries-</p>
<ul>
<li><code>neighbors dictionary</code>, where each key specifies a selected point, and the corresponding value is a list containing neighbors of the selected point.</li>
<li><code>weights dictionary</code>, similar to the neighbor dictionary but instead of specifying neighbors, the list contains the weight of each connection of the key to the neighbor listed in the neighbor dictionary.</li>
</ul>
<p><strong>WSP object</strong>: It is also used to construct spatial weight but unlike <code>W</code> object it represents the spatial weights in the form of a sparse matrix where each row shows the relationship of a point with every other point.</p>
<p>Constructing a <code>WSP</code> object requires fewer computation when compared to constructing a <code>W</code> object, but it does not contain the same amount of information as a <code>W</code> object. PySAL&rsquo;s statistical methods operate on these two objects and until now these two objects are mainly derived from vector data (which can be presented in the form of different structures like data frame, shapefiles).</p>
<h2 id="what-did-i-do-this-week">What did I do this week?</h2>
<p>Coming back to the coding period, in my project proposal I listed out the following tasks that I&rsquo;ll work on during first 2 weeks. Slight changes have been made in the timeline after having discussion with my mentors during CBPeriod, it was decided that <code>xarray</code> will be used for the project instead of <code>rasterio</code> because <code>xarray</code> provides a proper structure to the raster&rsquo;s metadata which makes it easy for users to manipulate and access the properties of raster file using <code>xarray.DataArray</code> object.</p>
<blockquote>
<p><em>Week 1 &amp; 2</em> (1st June - 14th June) :</p>
<ul>
<li>List out initial functionalities to be incorporated in the interface.</li>
<li>Implement necessary methods for streamlining the access to raster data using <code>rasterio</code> inside PySAL.</li>
<li>Add methods to extract extract metadata from rasters.</li>
<li>Create an optimized functionality for handling missing values in the raster data used by prototype transformational methods.</li>
<li>Investigate inner working of <code>georasters</code> methods, since some of its functionality can be improved and used for this project.</li>
<li>Discuss the proposed design of the API of interface and this will be worked upon in the next week.</li>
</ul>
</blockquote>
<p>Unfortunately, I had my exams going on during the first week of the coding period, therefore I was a little unproductive and could not completely focus on the project. During this time I set up my development environment, looked at <code>georasters</code> library, and worked on how I can convert <code>xarray.DataArray</code> to weight object.</p>
<p>My exams were over by the first week and I was able to devote more time to the project. My main task for this week was to work on prototype transformational methods that are going to be used in transforming the raster file accessed using <code>xarray</code> to <code>W</code> and <code>SW</code> objects. Along with this I also worked on converting results back to <code>xarray.Dataframe</code> object.</p>
<p>PRs made during this period:</p>
<ul>
<li><a href="https://github.com/MgeeeeK/libpysal/pull/1">Added rast2(W,SW)</a></li>
<li><a href="https://github.com/MgeeeeK/libpysal/pull/2">Added func for creating xr.dataarray</a></li>
</ul>
<p>Since I used the <code>lat2W</code> method, I noticed that the <code>W</code> object stores the neighbors in the list and for large values of rows and columns (2 arguments of the function) the computation runs out of memory, this problem will exist since the methods use eager evaluation. I plan to create an additional method which computes the dictionary values of <code>W</code> object lazily, working with generator objects is tough in this situation since some of the PySAL&rsquo;s methods require all data of <code>W</code> object in memory. This requires more time and I will see if it can be modified in a way so that the PySAL library can work with it.</p>
<h2 id="whats-next">What&rsquo;s next?</h2>
<p>During my recent project call, both mentors reviewed my work and suggested some corrections in the API and the function implementation. In the coming weeks, I have to incorporate the suggested changes and finalize both transformational methods (their APIs and return objects) and also work on the optimization part.</p>
<p>Wait for my next blog which will show the working of my contributed methods&hellip; Till then goodbye 👋.</p>

            </div>
        </article>

        <hr />

        <div class="post-info">
                <p>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://mgeeeek.github.io/tags/gsoc">gsoc</a></span><span class="tag"><a href="https://mgeeeek.github.io/tags/coding-period">coding period</a></span>
                </p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>886 Words</p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2020-06-14 05:30 &#43;0530</p>
        </div>

        
            <div class="pagination">
                <div class="pagination__title">
                    <span class="pagination__title-h"></span>
                    <hr />
                </div>

                <div class="pagination__buttons">
                    
                        <span class="button previous">
                            <a href="https://mgeeeek.github.io/posts/2020/06/coding-period-first-phase-part-2/">
                                <span class="button__icon">←</span>
                                <span class="button__text">Coding period: first phase part 2</span>
                            </a>
                        </span>
                    

                    
                        <span class="button next">
                            <a href="https://mgeeeek.github.io/posts/2020/05/community-bonding-period-wrap-up/">
                                <span class="button__text">Community bonding period wrap-up</span>
                                <span class="button__icon">→</span>
                            </a>
                        </span>
                    
                </div>
            </div>
        
    </main>

            </div>
        </div>

        




<script type="text/javascript" src="https://mgeeeek.github.io/bundle.min.2d5469329143160ae2456a69c3c76dc2d0a3b212b46afe291a51bd68650ed6f8697e001dab54f1c272c77ce08092a8c55e5bb4314e0ee334aab4b927ec896638.js" integrity="sha512-LVRpMpFDFgriRWppw8dtwtCjshK0av4pGlG9aGUO1vhpfgAdq1TxwnLHfOCAkqjFXlu0MU4O4zSqtLkn7IlmOA=="></script>




    </main>

        




<script type="text/javascript" src="https://mgeeeek.github.io/bundle.min.2d5469329143160ae2456a69c3c76dc2d0a3b212b46afe291a51bd68650ed6f8697e001dab54f1c272c77ce08092a8c55e5bb4314e0ee334aab4b927ec896638.js" integrity="sha512-LVRpMpFDFgriRWppw8dtwtCjshK0av4pGlG9aGUO1vhpfgAdq1TxwnLHfOCAkqjFXlu0MU4O4zSqtLkn7IlmOA=="></script>




</html>
